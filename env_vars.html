<!doctype html>
<html>
    <head>
        <title>Yet SQL LRS Documentation</title>
        <style type="text/css">
body{
    margin: 0 auto;
    padding: 30px;
    font: 20px Tahoma, Helvetica, Arial, Sans-Serif;
    line-height: 1.5;
}
h1, h2, h3, h4 {
	display: block; text-decoration: none;
	font: Helvetica, Arial, Sans-Serif;
 }
h1 {
  font-size: 35px;
 }
h2 {
  font-size: 30px;
 }
h3 {
  font-size: 25px;
 }
h4 {
  font-size: 20px;
 }
textarea {
	width: 600px; margin: 0 auto; background: #222; padding: 20px;
	font-size: 22px; color: #555; text-shadow: 0px 2px 3px #171717;
	-webkit-box-shadow: 0px 2px 3px #555;
	-moz-box-shadow: 0px 2px 3px #555;
	-webkit-border-radius: 10px;
	-moz-border-radius: 10px;
}
code {
  background: #eeeeee;
}
pre {
  margin: 0 auto;
  background: #eeeeee;
  padding: 20px;
	font-size: 15px;
	margin-bottom: 20px;
}
a {
	text-decoration: none;
	font: 18px Helvetica, Arial, Sans-Serif;
 }
hr {
  height: 3px;
  border: 0;
  background-color: #333;
}
img {
  max-width: 95%;
  display: block;
  margin: auto;
}
div#container {
  margin-left: auto;
  margin-right: auto;
  max-width: 80%;
}
/* a la https://developer.mozilla.org/en-US/docs/Learn/CSS/Building_blocks/Styling_tables#Spacing_and_layout */
table {
  width: 95%;
  margin-right: auto;
  margin-left: auto;
  border-collapse: collapse;
  border: 1px solid #dee2e5;
}
th, td {
  border: 1px solid #dee2e5;
  padding: 20px;
  line-height: 1.25;
}
tbody tr:nth-child(even) {
  background-color: #f6f8fa;
}
p {
  text-align: justify;
}

div.logo-container {
  width: 100%;
}

div.logo {
  width: 400px;
  margin-left: auto;
  margin-right: auto;
}
div.footer {
  font-size: medium;
  color:white;
  background-color: rgb(17, 55, 92) !important;
  width: 100%;
  display: block;
  text-align: center;
  padding-top: 30px;
  padding-bottom: 30px;
}
.footer a, .footer a:visited {
  color: white !important;
}

.footer a:hover {
  color: white !important;
  text-decoration: underline;
}

span.build {
  display: block;
  font-size: .7em;
}

</style>
    </head>
    <body>
      <div id="container">
        <div class="logo-container">
          <div class="logo">
            <img alt="Yet LRS Logo" src="images/doc_logo.png"/>
          </div>
        </div>
        <p><a href='index.html'><- Back to Index</a></p><h1 id="configuration&#95;variables">Configuration Variables</h1><p>All configuration variables can either be set directly via the command line as environment variables, or can be added to the config file <code>config/lrsql.json</code> as a JSON object property.</p><h3 id="logger">Logger</h3><table><thead><tr><th>Env Var</th><th>Config</th><th>Description</th><th>Default</th></tr></thead><tbody><tr><td><code>LRSQL&#95;LOG&#95;LEVEL</code></td><td><code>logLevel</code></td><td>The logging level to use. Can be <code>ALL</code>, <code>TRACE</code>, <code>DEBUG</code>, <code>INFO</code>, <code>WARN</code>, <code>ERROR</code> or <code>OFF</code></td><td><code>INFO</code></td></tr></tbody></table><h3 id="database">Database</h3><table><thead><tr><th>Env Var</th><th>Config</th><th>Description</th><th>Default</th></tr></thead><tbody><tr><td><code>LRSQL&#95;DB&#95;TYPE</code></td><td><code>dbType</code></td><td>The DBMS that lrsql will use. Currently supports <code>sqlite</code>, and <code>postgres</code>/<code>postgresql</code>. The default value used depends on the <code>main</code> entry point used, e.g. <code>lrsql.sqlite.main</code> will use <code>sqlite</code> by default, so overriding the default is <strong>not</strong> recommended.</td><td>Varies</td></tr><tr><td><code>LRSQL&#95;DB&#95;NAME</code></td><td><code>dbName</code></td><td>The name of the database. Should be set to <code>:memory:</code> for SQLite in-memory mode.</td><td><code>example</code></td></tr><tr><td><code>LRSQL&#95;DB&#95;HOST</code></td><td><code>dbHost</code></td><td>The host that the database will run on. Not supported by SQLite.</td><td><code>0.0.0.0</code></td></tr><tr><td><code>LRSQL&#95;DB&#95;PORT</code></td><td><code>dbPort</code></td><td>The port that the database will run on. Not supported by SQLite.</td><td><code>5432</code> (PG)</td></tr><tr><td><code>LRSQL&#95;DB&#95;PROPERTIES</code></td><td><code>dbProperties</code></td><td>Optional additional DB properties. Must be a string of key-val pairs that follow URL query parameter syntax (e.g. <code>key1=value1&amp;key2=value2</code>). Any <code>&amp;</code> character not used as a separator must be percent encoded. Supported properties will depend on the DBMS.</td><td>Not set</td></tr><tr><td><code>LRSQL&#95;DB&#95;JDBC&#95;URL</code></td><td><code>dbJdbcUrl</code></td><td>Optional JDBC URL; this will override the above properties if set. URL syntax will depend on the DBMS.</td><td>Not set</td></tr><tr><td><code>LRSQL&#95;DB&#95;USER</code></td><td><code>dbUser</code></td><td>The DB user. Optional.</td><td>Not set</td></tr><tr><td><code>LRSQL&#95;DB&#95;PASSWORD</code></td><td><code>dbPassword</code></td><td>The DB password. Optional.</td><td>Not set</td></tr><tr><td><code>LRSQL&#95;DB&#95;SCHEMA</code></td><td><code>dbSchema</code></td><td>The DB schema. Optional.</td><td>Not set</td></tr><tr><td><code>LRSQL&#95;DB&#95;CATALOG</code></td><td><code>dbCatalog</code></td><td>The DB catalog. Optional.</td><td>Not set</td></tr></tbody></table><h3 id="connection">Connection</h3><h4 id="hikaricp&#95;properties">HikariCP Properties</h4><p>The following environment variables are aliases for <a href='https://github.com/brettwooldridge/HikariCP#gear-configuration-knobs-baby'>HikariCP properties</a>. All of these variables (except for <code>poolName</code>) have default values that are already set, which may vary depending on the DBMS. All temporal values are in milliseconds.</p><table><thead><tr><th>Env Var</th><th>Config</th><th>Default</th><th>Valid Values</th></tr></thead><tbody><tr><td><code>LRSQL&#95;POOL&#95;AUTO&#95;COMMIT</code></td><td><code>poolAutoCommit</code></td><td><code>true</code></td><td><code>true</code>/<code>false</code></td></tr><tr><td><code>LRSQL&#95;POOL&#95;KEEPALIVE&#95;TIME</code></td><td><code>poolKeepaliveTime</code></td><td><code>0</code>†</td><td><code>≥ 10000</code> or <code>0</code>, less than <code>poolMaxLifetime</code></td></tr><tr><td><code>LRSQL&#95;POOL&#95;CONNECTION&#95;TIMEOUT</code></td><td><code>poolConnectionTimeout</code></td><td><code>3000</code></td><td><code>≥ 250</code></td></tr><tr><td><code>LRSQL&#95;POOL&#95;IDLE&#95;TIMEOUT</code></td><td><code>poolIdleTimeout</code></td><td><code>600000</code></td><td><code>≥ 10000</code> or <code>0</code></td></tr><tr><td><code>LRSQL&#95;POOL&#95;VALIDATION&#95;TIMEOUT</code></td><td><code>poolValidationTimeout</code></td><td><code>5000</code></td><td><code>≥ 250</code>, less than <code>poolConnectionTimeout</code></td></tr><tr><td><code>LRSQL&#95;POOL&#95;INITIALIZATION&#95;FAIL&#95;TIMEOUT</code></td><td><code>poolInitializationFailTimeout</code></td><td><code>1</code></td><td>Any integer</td></tr><tr><td><code>LRSQL&#95;POOL&#95;MAX&#95;LIFETIME</code></td><td><code>poolMaxLifetime</code></td><td><code>1800000</code> or <code>0</code>&#42;&#42;</td><td><code>≥ 30000</code> or <code>0</code></td></tr><tr><td><code>LRSQL&#95;POOL&#95;MINIMUM&#95;IDLE</code></td><td><code>poolMinimumIdle</code></td><td><code>1</code>&#42; or <code>10</code>&#42;&#42;&#42;</td><td><code>≥ 0</code></td></tr><tr><td><code>LRSQL&#95;POOL&#95;MAXIMUM&#95;SIZE</code></td><td><code>poolMaximumSize</code></td><td><code>1</code>&#42; or <code>10</code>&#42;&#42;&#42;</td><td><code>≥ 1</code></td></tr><tr><td><code>LRSQL&#95;POOL&#95;ISOLATE&#95;INTERNAL&#95;QUERIES</code></td><td><code>poolIsolateInternalQueries</code></td><td><code>false</code></td><td><code>true</code>/<code>false</code></td></tr><tr><td><code>LRSQL&#95;POOL&#95;LEAK&#95;DETECTION&#95;THRESHOLD</code></td><td><code>poolLeakDetectionThreshold</code></td><td><code>0</code>†</td><td><code>≥ 2000</code> or <code>0</code></td></tr><tr><td><code>LRSQL&#95;POOL&#95;TRANSACTION&#95;ISOLATION</code></td><td><code>poolTransactionIsolation</code></td><td>Not set</td><td><a href='https://docs.oracle.com/en/java/javase/11/docs/api/java.sql/java/sql/Connection.html'>JDBC Connection constant</a> (e.g. <code>TRANSACTION&#95;SERIALIZABLE</code>)</td></tr><tr><td><code>LRSQL&#95;POOL&#95;NAME</code></td><td><code>poolName</code></td><td>Not set</td><td>Any string</td></tr></tbody></table><p>&#42; SQLite default. &#42;&#42; SQLite in-memory default. &#42;&#42;&#42; Postgres default. † The property is set to be disabled by default.</p><p><i>NOTE 1:</i> SQLite uses different defaults for <code>poolMinimumIdle</code> and <code>poolMaximumSize</code> than Postgres due to issues with multi-threading with those DBMSs. Setting <code>poolMaximumSize</code> to values other than <code>1</code> will potentially cause exceptions when running concurrent operations.</p><p><i>NOTE 2:</i> SQLite, while in in-memory mode, automatically deletes the database whenever the connection is removed, which can occur if a connection is closed and <code>poolMaxLifetime</code> is exceeded. Thus, <code>poolMaxLifetime</code> is set to <code>0</code>, denoting infinite connection lifetime, for convenience.</p><p><i>NOTE 3:</i> None of the DBMSs that SQL LRS currently supports allow for <code>TRANSACTION&#95;NONE</code> as a <code>poolTransactionIsolation</code> value.</p><h4 id="metric&#95;reporting&#95;via&#95;jmx">Metric Reporting via JMX</h4><p>The following config var is to activate metrics reporting via JMX.</p><table><thead><tr><th>Env Var</th><th>Config</th><th>Description</th><th>Default</th></tr></thead><tbody><tr><td><code>LRSQL&#95;POOL&#95;ENABLE&#95;JMX</code></td><td><code>poolEnableJmx</code></td><td>Activate metrics reporting via JMX.</td><td><code>false</code></td></tr></tbody></table><p>Unlike the previous vars, which are one-to-one with HikariCP properties, the following sets multiple such properties:</p><ul><li><code>registerMbeans</code> is set in order to activate JMX reporting.</li><li><code>allowPoolSuspension</code> is set to <code>true</code> to allow for user control over connection pools.</li><li><code>metricRegistry</code> is set to be a Codahale/Dropwizard <code>MetricRegistry</code> instance.</li></ul><h4 id="missing&#95;options?">Missing options?</h4><p>You may have noted that some options are not available:</p><ul><li><code>connectionTestQuery</code> is not recommended for JDBC4 (which all of our DBMS implementations use).</li><li><code>readOnly</code> will cause the SQL LRS to not work if set to <code>true</code>.</li><li><code>connectionInitSql</code> is set automatically by the SQL LRS system (e.g. to run pragmas in SQLite).</li><li><code>driverClassName</code> and <code>dataSource</code> would clash with SQL LRS's approach to setting the JDBC driver, which is via an URL.</li><li><code>healthCheckRegistry</code> cannot easily report via JMX, and most of its information should be covered by <code>metricRegistry</code> anyways.</li><li><code>threadFactory</code> and <code>scheduledExecutor</code> are Java instances that should only be used in specific execution environments.</li></ul><h3 id="tuning">Tuning</h3><p>The following options are used for advanced database performance tuning and may affect DB schema and performance. Use with caution.</p><table><thead><tr></tr></thead><tbody><tr></tr><tr></tr></tbody></table><h3 id="lrs">LRS</h3><table><thead><tr><th>Env Var</th><th>Config</th><th>Description</th><th>Default</th></tr></thead><tbody><tr><td><code>LRSQL&#95;ADMIN&#95;USER&#95;DEFAULT</code></td><td><code>adminUserDefault</code></td><td>The username of the account that seeds the account table, ie. added to the table upon initialization. Optional but <strong>should be set in order to create other accounts</strong>.</td><td>Not set</td></tr><tr><td><code>LRSQL&#95;ADMIN&#95;PASS&#95;DEFAULT</code></td><td><code>adminPassDefault</code></td><td>The password of the account that seeds the account table. Optional but <strong>should be set in order to create other accounts</strong>.</td><td>Not set</td></tr><tr><td><code>LRSQL&#95;API&#95;KEY&#95;DEFAULT</code></td><td><code>apiKeyDefault</code></td><td>The public API key that seeds the credential table. Optional, and is ignored if no seed admin account is set.</td><td>Not set</td></tr><tr><td><code>LRSQL&#95;API&#95;SECRET&#95;DEFAULT</code></td><td><code>apiSecretDefault</code></td><td>The secret API key that seeds the credential table. Optional, and is ignored if no seed admin account is set.</td><td>Not set</td></tr><tr><td><code>LRSQL&#95;STMT&#95;GET&#95;DEFAULT</code></td><td><code>stmtGetDefault</code></td><td>The default <code>limit</code> value in a statement query. Queries default to this value if not explicitly set.</td><td><code>50</code></td></tr><tr><td><code>LRSQL&#95;STMT&#95;GET&#95;MAX</code></td><td><code>stmtGetMax</code></td><td>The maximum allowed <code>limit</code> value for a statement query. If an explicit <code>limit</code> value exceeds this value, it will be overridden.</td><td><code>50</code></td></tr><tr><td><code>LRSQL&#95;AUTHORITY&#95;TEMPLATE</code></td><td><code>authorityTemplate</code></td><td>The filepath to the Statement authority template file, which describes how authorities are constructed during statement insertion. If the file is not found, the system defaults to a default authority function.</td><td><details><code>config/authority.json.template</code><summary>(Filepath)</summary></details></td></tr><tr><td><code>LRSQL&#95;AUTHORITY&#95;URL</code></td><td><code>authorityUrl</code></td><td>The URL that is set as the <code>authority-url</code> value when constructing an authority from a template.</td><td><code>http://example.org</code></td></tr><tr><td><code>LRSQL&#95;OIDC&#95;AUTHORITY&#95;TEMPLATE</code></td><td><code>oidcAuthorityTemplate</code></td><td>Like <code>LRSQL&#95;AUTHORITY&#95;TEMPLATE</code>, but only used when forming an authority from an OIDC access token.</td><td><details><code>config/oidc&#95;authority.json.template</code><summary>(Filepath)</summary></details></td></tr><tr><td><code>LRSQL&#95;OIDC&#95;SCOPE&#95;PREFIX</code></td><td><code>oidcScopePrefix</code></td><td>An optional prefix prepended to OIDC scope. For example, setting this to <code>lrs:</code> would change the expected <code>all</code> scope to <code>lrs:all</code></td><td><code>&quot;&quot;</code></td></tr><tr><td><code>LRSQL&#95;STMT&#95;RETRY&#95;LIMIT</code></td><td><code>stmtRetryLimit</code></td><td>The number of times to retry a statement post transaction before failing.</td><td><code>10</code></td></tr><tr><td><code>LRSQL&#95;STMT&#95;RETRY&#95;BUDGET</code></td><td><code>stmtRetryBudget</code></td><td>The max amount of time allowed for statement POST transaction retries before failing (ms).</td><td><code>1000</code></td></tr><tr><td><code>LRSQL&#95;ENABLE&#95;REACTIONS</code></td><td><code>enableReactions</code></td><td>Whether or not to enable statement reactions.</td><td><code>false</code></td></tr><tr><td><code>LRSQL&#95;REACTION&#95;BUFFER&#95;SIZE</code></td><td><code>reactionBufferSize</code></td><td>Number of pending reactions to allow. Additional reactions will be dropped with a warning message.</td><td><code>10000</code></td></tr></tbody></table><p><i>NOTE:</i> <code>LRSQL&#95;STMT&#95;RETRY&#95;LIMIT</code> and <code>LRSQL&#95;STMT&#95;RETRY&#95;BUDGET</code> are used to mitigate a rare scenario where specific Actors or Activities are updated many times in large concurrent batches. In this situation the DBMS can encounter locking and these settings are used to allow retries that eventually write all the conflicting transactions, but may incur performance degradation. If you are experiencing this situation the first step would be to look at why your data needs to rewrite specific Actors or Activities rapidly with different values, which could potentially solve it at the source. If the issue cannot be avoided by data design alone, another possible solution is reducing batch sizes to decrease or eliminate locks. As a last resort, increasing these settings will at least ensure the statements get written but as mentioned may incur a slowdown in concurrent throughput.</p><h3 id="webserver">Webserver</h3><h4 id="host&#95;&&#95;ports">Host & Ports</h4><table><thead><tr><th>Env Var</th><th>Config</th><th>Description</th><th>Default</th></tr></thead><tbody><tr><td><code>LRSQL&#95;ENABLE&#95;HTTP</code></td><td><code>enableHttp</code></td><td>Whether HTTP is enabled or not (as opposed to HTTPS, which is always enabled).</td><td><code>true</code></td></tr><tr><td><code>LRSQL&#95;ENABLE&#95;HTTP2</code></td><td><code>enableHttp2</code></td><td>Whether HTTP/2 is supported or not.</td><td><code>true</code></td></tr><tr><td><code>LRSQL&#95;HTTP&#95;HOST</code></td><td><code>httpHost</code></td><td>The host that the webserver will run on.</td><td><code>0.0.0.0</code></td></tr><tr><td><code>LRSQL&#95;HTTP&#95;PORT</code></td><td><code>httpPort</code></td><td>The HTTP port that the webserver will be open on.</td><td><code>8080</code></td></tr><tr><td><code>LRSQL&#95;SSL&#95;PORT</code></td><td><code>sslPort</code></td><td>The HTTPS port that the webserver will be open on.</td><td><code>8443</code></td></tr><tr><td><code>LRSQL&#95;URL&#95;PREFIX</code></td><td><code>urlPrefix</code></td><td>The prefix of the webserver URL path, e.g. the prefix in <code>http://0.0.0.0:8080/xapi</code> is <code>/xapi</code>. Used when constructing the <code>more</code> value for multi-statement queries. <em>(Note: Only applies to LRS xapi endpoints, not admin/ui endpoints)</em></td><td><code>/xapi</code></td></tr></tbody></table>|<code>LRSQL&#95;PROXY&#95;PATH</code>                | <code>proxyPath</code>             | This path modification is exclusively for use with a proxy, such as apache or nginx or a load balancer, where a path is added to prefix the entire application (such as <code>https://www.mysystem.com/mylrs/xapi/statements</code>). This does not actually change the routes of the application, it informs the admin frontend where to look for the server endpoints based on the proxied setup, and thus must be used in conjunction with a third party proxy. If used, the value must start with a leading <code>/</code> but not end with one (e.g. <code>/mylrs</code> is valid, as is <code>/mylrs/b</code> but <code>/mylrs/</code> is not). Use with caution.  | Not Set   |<h4 id="tls/ssl&#95;certificate">TLS/SSL Certificate</h4><table><thead><tr><th>Env Var</th><th>Config</th><th>Description</th><th>Default</th></tr></thead><tbody><tr><td><code>LRSQL&#95;KEY&#95;FILE</code></td><td><code>keyFile</code></td><td>The path to the Java Keystore file that contains the key pair and credentials, which are used for HTTPS as well as JWT signing and verification.</td><td><code>config/keystore.jks</code></td></tr><tr><td><code>LRSQL&#95;KEY&#95;ALIAS</code></td><td><code>keyAlias</code></td><td>The alias of the private key.</td><td><code>lrsql&#95;keystore</code></td></tr><tr><td><code>LRSQL&#95;KEY&#95;PASSWORD</code></td><td><code>keyPassword</code></td><td>The password protecting the keystore. <strong>It is highly recommended that you override the default value.</strong></td><td><code>lrsql&#95;pass</code></td></tr><tr><td><code>LRSQL&#95;KEY&#95;PKEY&#95;FILE</code></td><td><code>keyPkeyFile</code></td><td>Private key in PEM format</td><td><code>config/server.key.pem</code></td></tr><tr><td><code>LRSQL&#95;KEY&#95;CERT&#95;CHAIN</code></td><td><code>keyCertChain</code></td><td>Comma separated PEM files for cert. See the TLS/HTTPS section below.</td><td><details><code>config/server.crt.pem,config/cacert.pem</code><summary>(Filepaths)</summary></details></td></tr><tr><td><code>LRSQL&#95;KEY&#95;ENABLE&#95;SELFIE</code></td><td><code>keyEnableSelfie</code></td><td>Boolean, whether or not to enable self-signed cert generation.</td><td><code>true</code></td></tr></tbody></table><h4 id="jwt&#95;config">JWT Config</h4><table><thead><tr><th>Env Var</th><th>Config</th><th>Description</th><th>Default</th></tr></thead><tbody><tr><td><code>LRSQL&#95;JWT&#95;EXP&#95;TIME</code></td><td><code>jwtExpTime</code></td><td>The amount of time, in seconds, after a JWT is created when it expires. Since JWTs are not revocable, <strong>this this time should be short</strong> (i.e. one hour or less).</td><td><code>3600</code> (one hour</td></tr><tr><td><code>LRSQL&#95;JWT&#95;EXP&#95;LEEWAY</code></td><td><code>jwtExpLeeway</code></td><td>The amount of time, in seconds, before or after the expiration instant when a JWT should still count as un-expired. Used to compensate for clock desync. Applied to both LRS and OIDC tokens.</td><td><code>1</code> (one second</td></tr><tr><td><code>LRSQL&#95;JWT&#95;NO&#95;VAL</code></td><td><code>jwtNoVal</code></td><td>(<strong>DANGEROUS!</strong>) This flag removes JWT Token Validation and simply accepts token claims as configured by the associated variables below. It is extemely unlikely that you need this as it is for very specific proxy-overwrite authentication scenarios, and it poses a serious threat to system security if enabled.</td><td><code>false</code></td></tr><tr><td><code>LRSQL&#95;JWT&#95;NO&#95;VAL&#95;UNAME</code></td><td><code>jwtNoValUname</code></td><td>(<strong>DANGEROUS!</strong> See <code>LRSQL&#95;JWT&#95;NO&#95;VAL</code>) This variable configures which claim key to use for the username when token validation is turned off.</td><td>Not Set</td></tr><tr><td><code>LRSQL&#95;JWT&#95;NO&#95;VAL&#95;ISSUER</code></td><td><code>jwtNoValIssuer</code></td><td>(<strong>DANGEROUS!</strong> See <code>LRSQL&#95;JWT&#95;NO&#95;VAL</code>) This variable configures which claim key to use for the issuer when token validation is turned off.</td><td>Not Set</td></tr><tr><td><code>LRSQL&#95;JWT&#95;NO&#95;VAL&#95;ROLE&#95;KEY</code></td><td><code>jwtNoValRoleKey</code></td><td>(<strong>DANGEROUS!</strong> See <code>LRSQL&#95;JWT&#95;NO&#95;VAL</code>) This variable configures which claim key to look in for the role when token validation is turned off.</td><td>Not Set</td></tr><tr><td><code>LRSQL&#95;JWT&#95;NO&#95;VAL&#95;ROLE</code></td><td><code>jwtNoValRole</code></td><td>(<strong>DANGEROUS!</strong> See <code>LRSQL&#95;JWT&#95;NO&#95;VAL</code>) This variable configures what role must be present in the key above when token validation is turned off.</td><td>Not Set</td></tr></tbody></table><h4 id="oidc">OIDC</h4><p>This section is for optionally configuring OIDC Authentication/Authorization through a compatible third party access / identity management provider such as Keycloak. These variables have no effect if the first one, <code>LRSQL&#95;OIDC&#95;ISSUER</code>, is not set.</p><table><thead><tr><th>Env Var</th><th>Config</th><th>Description</th><th>Default</th></tr></thead><tbody><tr><td><code>LRSQL&#95;OIDC&#95;ISSUER</code></td><td><code>oidcIssuer</code></td><td>OIDC Issuer address used for <a href='https://openid.net/specs/openid-connect-discovery-1_0.html#ProviderConfig'>discovery</a>. Will enable OIDC if present.</td><td>Not set</td></tr><tr><td><code>LRSQL&#95;OIDC&#95;AUDIENCE</code></td><td><code>oidcAudience</code></td><td>Optional OIDC audience for token claim verification.</td><td>Not set</td></tr><tr><td><code>LRSQL&#95;OIDC&#95;CLIENT&#95;ID</code></td><td><code>oidcClientId</code></td><td>An optional OIDC client ID for the SQL LRS Admin SPA. If provided, along with the <code>LRSQL&#95;OIDC&#95;ISSUER</code> and <code>LRSQL&#95;OIDC&#95;AUDIENCE</code> variables, will enable OIDC access to the Admin UI.</td><td>Not Set</td></tr><tr><td><code>LRSQL&#95;OIDC&#95;CLIENT&#95;TEMPLATE</code></td><td><code>oidcClientTemplate</code></td><td>An optional template to modify LRS Admin UI client OIDC configuration.</td><td>Not Set</td></tr><tr><td><code>LRSQL&#95;OIDC&#95;VERIFY&#95;REMOTE&#95;ISSUER</code></td><td><code>oidcVerifyRemoteIssuer</code></td><td>Verify on startup that the issuer in remote configuration matches <code>LRSQL&#95;OIDC&#95;ISSUER</code>.</td><td><code>true</code></td></tr><tr><td><code>LRSQL&#95;OIDC&#95;ENABLE&#95;LOCAL&#95;ADMIN</code></td><td><code>oidcEnableLocalAdmin</code></td><td>Whether or not to enable local administrative account authentication, login and management when <code>LRSQL&#95;OIDC&#95;ISSUER</code> is set.</td><td><code>false</code></td></tr></tbody></table><h4 id="clamav&#95;virus&#95;scanning">ClamAV Virus Scanning</h4><p>This section is for optionally configuring <a href='https://www.clamav.net/'>ClamAV antivirus scanning</a> for inbound files.</p><table><thead><tr><th>Env Var</th><th>Config</th><th>Description</th><th>Default</th></tr></thead><tbody><tr><td><code>LRSQL&#95;ENABLE&#95;CLAMAV</code></td><td><code>enableClamav</code></td><td>Whether or not to enable ClamAV antivirus scanning.</td><td><code>false</code></td></tr><tr><td><code>LRSQL&#95;CLAMAV&#95;HOST</code></td><td><code>clamavHost</code></td><td>ClamAV Daemon Host</td><td><code>localhost</code></td></tr><tr><td><code>LRSQL&#95;CLAMAV&#95;PORT</code></td><td><code>clamavPort</code></td><td>ClamAV Daemon Port</td><td><code>3310</code></td></tr></tbody></table><h4 id="cors">CORS</h4><table><thead><tr><th>Env Var</th><th>Config</th><th>Description</th><th>Default</th></tr></thead><tbody><tr><td><code>LRSQL&#95;ALLOW&#95;ALL&#95;ORIGINS</code></td><td><code>allowAllOrigins</code></td><td>Determines whether to enable CORS. When false, it will not allow all origins, it will only allow either <code>LRSQL&#95;HTTP&#95;HOST</code> (for both HTTPS and HTTP ports) or if <code>LRSQL&#95;ALLOWED&#95;ORIGINS</code> is set that will override.</td><td><code>false</code></td></tr><tr><td><code>LRSQL&#95;ALLOWED&#95;ORIGINS</code></td><td><code>allowedOrigins</code></td><td>This is a list of allowed origins which overrides the defaults. As an ENV it should be written as a comma separated list with no spaces. In JSON config it can be written directly as an array, e.g. <code>&#91;&quot;http://myhost:myport&quot;, &quot;https://anotherhost&quot;&#93;</code></td><td>Not Set</td></tr></tbody></table><h4 id="browser&#95;security&#95;headers">Browser Security Headers</h4><p>These config vars enable and configure browser security response headers from the server. In all cases, not setting them results in no corresponding header, setting them to <code>&quot;&#91;default&#93;&quot;</code> results in a generic server default (specified below), and any other string manually overrides the header value.</p><table><thead><tr><th>Env Var</th><th>Config</th><th>Header Name</th><th><code>&#91;default&#93;</code> value</th></tr></thead></table>| <code>LRSQL&#95;SEC&#95;HEAD&#95;HSTS</code>   | <code>secHeadHsts</code>   | <code>Strict-Transport-Security</code> |<code>max-age=31536000; includeSubdomains</code><table><thead><tr></tr></thead><tbody><tr></tr><tr></tr><tr></tr><tr></tr><tr></tr></tbody></table><h4 id="admin&#95;features">Admin Features</h4><table><thead><tr><th>Env Var</th><th>Config</th><th>Description</th><th>Default</th></tr></thead><tbody><tr><td><code>LRSQL&#95;ENABLE&#95;ADMIN&#95;DELETE&#95;ACTOR</code></td><td><code>enableAdminDeleteActor</code></td><td>Whether or not to enable the route and UI for deleting actors and related documents</td><td><code>false</code></td></tr><tr><td><code>LRSQL&#95;ENABLE&#95;ADMIN&#95;UI</code></td><td><code>enableAdminUi</code></td><td>Whether or not to serve the administrative UI at <code>/admin</code></td><td><code>true</code></td></tr><tr><td><code>LRSQL&#95;ENABLE&#95;ADMIN&#95;STATUS</code></td><td><code>enableAdminStatus</code></td><td>Whether or not to serve admin system status data that queries the database.</td><td><code>true</code></td></tr><tr><td><code>LRSQL&#95;ENABLE&#95;STMT&#95;HTML</code></td><td><code>enableStmtHtml</code></td><td>Whether or not HTML data is returned in the LRS HTTP response. If <code>false</code> disables HTML rendering even if <code>LRSQL&#95;ENABLE&#95;ADMIN&#95;UI</code> is <code>true</code>. In that case the UI will not display the Statement Browser feature.</td><td><code>true</code></td></tr></tbody></table><p><a href='index.html'><- Back to Index</a></p>
        <div class="footer">
         &copy; 2021-2024 <a href="https://www.yetanalytics.com" target="_blank">Yet Analytics Inc.</a> |
         <a href="https://github.com/yetanalytics/lrsql/blob/main/LICENSE" target="_blank">Licensed under the Apache 2.0 License</a> |
         Contribute on <a href="https://github.com/yetanalytics/lrsql" target="_blank">GitHub</a>
         <span class="build">Build: 722c1e38701ffd4d1f1270d0a4a9e86ec36d609a</span>
        </div>
      </div>
    </body>
</html>
